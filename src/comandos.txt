BEGIN

CREATE SCHEMA IF NOT EXISTS <schema>;

SET search_path = <schema>;

CREATE TABLE IF NOT EXISTS <table>(
    <atribute> <type>,
    ...
    CONSTRAINT <tablePK> PRIMARY KEY (<atributes>),
    CONSTRAINT <tableFK> FOREIGN KEY (<atributes>) REFERENCES <table>(<atributes>)
    ON DELETE RESTRICT ON UPDATE CASCADE
);

\COPY <table> from <file.csv> WITH (FORMAT csv, ...)

INSERT INTO <schema>.<table>(<atributes>)
    SELECT DISTINCT ON (<atributes>)
    <atribute>::<type>,
    (SELECT <a> FROM <s>.<t> WHERE <a> = <t>.<a>)::<type>,
    ...
FROM <schema>.<table> <alias1>
LEFT JOIN <schema>.<table> <alias2> ON <alias2>.<a> = <alias1>.<a>;